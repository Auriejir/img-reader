<!DOCTYPE html> 
<html lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>ùíØùíæùí∏ùìÄ</title>
    <link id="favicon" rel="icon" type="image/svg" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64"><style> .letter { font: bold 50px sans-serif; fill: black; paint-order: stroke; stroke: white; stroke-width: 1px; stroke-linecap: butt; stroke-linejoin: miter; text-anchor:middle } </style><text x="32" y="48" class="letter">‚è≥</text></svg>' />
    <style> /* span#t1, span#t2{ text-decoration: line-through; } */
      body { --nowInPx : 0; }
      div#lost { display: inline-block; width: 450px; vertical-align: top; margin: 5px; } /* iframe {display: none;} */
      div#stuff { display: inline-block; width: 450px; vertical-align: top; margin: 5px; font-family: monospace; }
      div#lifeLine { display: inline-block; width: 500px; height: 25px; vertical-align: top; margin: 5px 0 0 0; font-family: monospace; } div#lifeLine div { display: inline-block; height: 25px; }
      div#lifeLine div.ll0 { background-color: green; } div#lifeLine div.ll1 { background-color: red; } div#lifeLine div.ll2 { background-color: purple; } div#lifeLine div.ll3 { background-color: black; }
      div.pouet { display: inline-block; text-align: justify; width: 340px; vertical-align: top; margin: 5px; } 
      div.pouet div.b { font-weight: bold; text-decoration: underline; } 
      div.pouet div.d { font-style: italic; text-align: center; font-weight: bold; } 
      div.pouet div.r { text-align: right; }
    </style>
    <script type="text/javascript">
      var rainbow = [ [ 0, 0, 0 ], [ 255, 0, 0 ], [ 255, 255, 0 ], [ 0, 255, 0 ], [ 0, 255, 255 ], [ 0, 0, 255 ], [ 0, 0, 0 ] ], lineLength = 420;
      //             first contact   first loss    first comeback  second loss  second comeback   third loss
      var stamps = [ 1569775077050, 1579089209296, 1586350342726, 1594062904960, 1649687400151, 1675717795701 ], endStamp = 1766491200000, pxStep = ( ( endStamp - stamps[0] ) / lineLength );
      //                   0              1              2              3              4              5 
      var longBS = "{ Paris } O, I am slain! ( Falls. ) [ If thou be merciful, ] Open the tomb, lay me with Juliet. ( Dies. ) / { Romeo } In faith, I will. Let me peruse this face. / Mercutio‚Äôs kinsman, noble County Paris! / What said my man, when my betossed soul / Did not attend him as we rode? I think / He told me Paris should have married Juliet. / Said he not so? Or did I dream it so? / Or am I mad, hearing him talk of Juliet, / To think it was so? O, give me thy hand, / One writ with me in sour misfortune‚Äôs book! / I‚Äôll bury thee in a triumphant grave. / A grave? O no, a lantern, slaught‚Äôred youth; / For here lies Juliet, and her beauty makes / This vault a feasting presence full of light. / Death, lie thou there, by a dead man interr‚Äôd. / ( Laying Paris in the tomb. )  How oft when men are at the point of death / Have they been merry, which their keepers call / A lightning before death! O how may I / Call this a lightning? O my love, my wife, / Death, that hath suck‚Äôd the honey of thy breath, / Hath had no power yet upon thy beauty: / Thou art not conquer‚Äôd, beauty‚Äôs ensign yet / Is crimson in thy lips and in thy cheeks, / And death‚Äôs pale flag is not advanced there. / Tybalt, liest thou there in thy bloody sheet? / O, what more favor can I do to thee, / Than with that hand that cut thy youth in twain / To sunder his that was thine enemy? / Forgive me, cousin! Ah, dear Juliet, / Why art thou yet so fair? Shall I believe / That unsubstantial Death is amorous, / And that the lean abhorred monster keeps / Thee here in dark to be his paramour? / For fear of that, I still will stay with thee, / And never from this palace of dim night / Depart again. Here, here will I remain / With worms that are thy chambermaids; O, here / Will I set up my everlasting rest, / And shake the yoke of inauspicious stars / From this world-wearied flesh. Eyes, look your last! / Arms, take your last embrace! And, lips, O you / The doors of breath, seal with a righteous kiss / A dateless bargain to engrossing death! / Come, bitter conduct, come, unsavory guide! / Thou desperate pilot, now at once run on / The dashing rocks thy sea-sick weary bark! / Here‚Äôs to my love! ( Drinks. ) [ O true apothecary! ] / Thy drugs are quick. Thus with a kiss I die. / ( Dies. )";
      var mediumBS = "{ Juliet } Go get thee hence, for I will not away. / What‚Äôs here? A cup clos‚Äôd in my true love‚Äôs hand? / Poison, I see, hath been his timeless end. / O churl, drunk all, and left no friendly drop / To help me after? I will kiss thy lips, / Haply some poison yet doth hang on them, / To make me die with a restorative. / Thy lips are warm. // { First Watchman } ( Within. ) [ Lead, boy, which way? ] / { Juliet } Yea, noise? Then I‚Äôll be brief. O happy dagger, ( Taking Romeo‚Äôs dagger. ) This is thy sheath; ( Stabs herself. ) [there rust, and let me die.] ( Falls on Romeo‚Äôs body and dies. ) ";
      var shortBS = "{ Capulet } O heavens! O wife, look how our daughter bleeds! / This dagger hath mista‚Äôen, for lo his house / Is empty on the back of Montague, / And it mis-sheathed in my daughter‚Äôs bosom!";
      var subs = { "/" : "<br/>", "(" : '<div class="d">', ")" : "</div>", "[" : '<div class="r">', "]" : "</div>", "{" : '<div class="b">', "}" : "</div>" };
      
      function yoda(f,p) { var r; try { r = f.apply(this,p); } catch(e) { return false; } return r; } // there is no fuckin try
      function zfill(a,b=2) { return (''+a).padStart(b,"0"); } //(a.length < b) ? '0'+a : ''+a; | (a.length > b) ? a.slice(-1*b) : 
      function x(n) { return zfill( Math.floor( n + 0.5 ).toString(16) ); }
      function grad(text,c,format=false) { if( c.length < 2 ) { return ( c.length == 1 ) ? '<span style="color:#' + x(c[0][0]) + x(c[0][1]) + x(c[0][2]) + ';">' + text + '</span>' : text; }
        let stuff = text.split( "" ), step = stuff.length / ( c.length - 1 ), dc0, dc1, dc2;
        if( format ){ for( let i = 0; i < stuff.length; ++i ) { if( subs[stuff[i]] !== undefined ){ stuff[i] = subs[stuff[i]]; } } }
        for( var i = 0, k = 0, j = -1; i < stuff.length; ++i, ++k ) { 
          if( i % Math.floor( step + 0.5 ) == 0 ) { ++j; k = 0; 
            dc0 = ( ( c[ ( j + 1 ) % c.length ][0] - c[ j % c.length ][0] ) / step ); dc1 = ( ( c[ ( j + 1 ) % c.length ][1] - c[ j % c.length ][1] ) / step ); dc2 = ( ( c[ ( j + 1 ) % c.length ][2] - c[ j % c.length ][2] ) / step );
          } stuff[i] = '<span style="color:#' + x( c[ j % c.length ][0] + dc0 * k ) + x( c[ j % c.length ][1] + dc1 * k ) + x( c[ j % c.length ][2] + dc2 * k ) + ';">' + stuff[i] + '</span>';
        } return stuff.join('');
      }
      function format(text) { let stuff = text.split( "" );
        for( let i = 0; i < stuff.length; ++i ) { if( subs[stuff[i]] !== undefined ){ stuff[i] = subs[stuff[i]]; } } return stuff.join('');
      }

      function ms2hms(s,f=47,solid=false) {
        let t = ( s < 0 ) ? -1 * s : s, m, r = []; 
        if( ( t >= 31556952000 || solid ) && ( f & 32 ) ) { m = ''+Math.floor( t / 31556952000 ); r.push( ( solid ? m.padStart( 1, "0" ) : m ) + " year"   + ( ( m > 1 ) ? "s" : ( solid ? " " : "" ) ) ); t -= ( m * 31556952000 ); }
        if( ( t >= 2629746000  || solid ) && ( f & 16 ) ) { m = ''+Math.floor( t / 2629746000  ); r.push( ( solid ? m.padStart( 2, "0" ) : m ) + " month"  + ( ( m > 1 ) ? "s" : ( solid ? " " : "" ) ) ); t -= ( m * 2629746000  ); }
        if( ( t >= 86400000    || solid ) && ( f &  8 ) ) { m = ''+Math.floor( t / 86400000    ); r.push( ( solid ? m.padStart( 3, "0" ) : m ) + " day"    + ( ( m > 1 ) ? "s" : ( solid ? " " : "" ) ) ); t -= ( m * 86400000    ); }
        if( ( t >= 3600000     || solid ) && ( f &  4 ) ) { m = ''+Math.floor( t / 3600000     ); r.push( ( solid ? m.padStart( 2, "0" ) : m ) + " hour"   + ( ( m > 1 ) ? "s" : ( solid ? " " : "" ) ) ); t -= ( m * 3600000     ); }
        if( ( t >= 60000       || solid ) && ( f &  2 ) ) { m = ''+Math.floor( t / 60000       ); r.push( ( solid ? m.padStart( 2, "0" ) : m ) + " minute" + ( ( m > 1 ) ? "s" : ( solid ? " " : "" ) ) ); t -= ( m * 60000       ); }
        if( ( t >= 1000        || solid ) && ( f &  1 ) ) { m = ''+Math.floor( t / 1000        ); r.push( ( solid ? m.padStart( 2, "0" ) : m ) + " second" + ( ( m > 1 ) ? "s" : ( solid ? " " : "" ) ) ); t -= ( m * 1000        ); }
        return r.join(', ');
      }
      //function readable(v) { var r = ( v < 0 ) ? v + 4294967296 : v; return ( r > 562949953421312 ) ? ( r / 1125899906842624. ).toFixed(2) + " P": ( r > 549755813888 ) ? ( r / 1099511627776. ).toFixed(2) + " T": ( r > 536870912 ) ? ( r / 1073741824. ).toFixed(2) + " G": ( r > 524288 ) ? ( r / 1048576. ).toFixed(2) + " M": ( r > 512 ) ? ( r / 1024. ).toFixed(2) + " K": r; }
      function init(){ let d = [ 1, 2, 4, 8, 16, 32 ], b = [ [], [], [], [] ]; tick(); //flip();
        //for( let i = 0; i < d.length; ++i ) {
        //  b[0].push( grad( ms2hms( stamps[4] - stamps[0], d[i] ), rainbow ) );
        //  b[1].push( grad( ms2hms( stamps[4] - stamps[3], d[i] ), rainbow ) );
        //  b[2].push( grad( ms2hms( stamps[5] - stamps[4], d[i] ), rainbow ) );
        //  b[3].push( grad( ms2hms( stamps[6] - stamps[4], d[i] ), rainbow ) );
        //}
        //document.getElementById('breakdown').innerHTML = '<br/>' + [ b[0].join('<br/>'), b[1].join('<br/>'), b[2].join('<br/>'), b[3].join('<br/>') ].join('<br/><br/>') + '<br/>';
        //document.getElementById('t1').innerHTML = grad( ms2hms( stamps[4] - stamps[7] ), rainbow ); // latest absence
        //document.getElementById('t2').innerHTML = grad( ms2hms( stamps[5] - stamps[4] ), rainbow ); // until expire
        //document.getElementById('t3').innerHTML = grad( ms2hms( stamps[4] - stamps[0] ), rainbow ); // total time
        document.getElementById('t4').innerHTML = grad( ms2hms( ( stamps[1] - stamps[0] ) + ( stamps[3] - stamps[2] ) + ( stamps[5] - stamps[4] ), 47, true ), rainbow ); // effective time
        //document.getElementById('t5').innerHTML = grad( ms2hms( ( stamps[2] - stamps[1] ) + ( stamps[6] - stamps[3] ) + ( stamps[4] - stamps[7] ) ), rainbow ); // lost time
        document.getElementById('t9').innerHTML = grad( ms2hms( stamps[5] - stamps[4], 47, true ), rainbow ); // latest presence
        if( window.location.href.split('#')[1] != "plain" ) {
          document.getElementById('t6').innerHTML = grad( longBS, rainbow, true );  //format(longBS);
          document.getElementById('t7').innerHTML = grad( mediumBS, rainbow, true );//format(mediumBS);
          document.getElementById('t8').innerHTML = grad( shortBS, rainbow, true ); //format(shortBS);
        } drawTimeLine();
        //setTimeout(tick, 1000);
      }

      function tick() { let now = Date.now(); document.body.style.setProperty('--nowInPx', sec2px( now ) + 'px' );
        document.getElementById('t1').innerHTML = grad( ms2hms( now - stamps[ stamps.length - 1 ], 47, true ), rainbow ); // latest absence
        document.getElementById('t2').innerHTML = grad( ms2hms( endStamp - now, 47, true ), rainbow ); // until expire
        document.getElementById('t3').innerHTML = grad( ms2hms( now - stamps[0], 47, true ), rainbow ); // total time
        document.getElementById('t5').innerHTML = grad( ms2hms( ( stamps[2] - stamps[1] ) + ( stamps[4] - stamps[3] ) + ( now - stamps[5] ), 47, true ), rainbow ); // lost time
        setTimeout(tick, 1000); //console.log("ticked");
      }

      function randStuff(n) { r = ""; for( var i = 0; i < n; ++i ) { r += Math.floor( Math.random() * 10 ); } return r; }

      function drawRectangle( parent, x1, y1, x2, y2, itemID = null, className = null, content = null, color = null, callback = null ) { //newLine.style.zIndex = 1;
        let newLine = parent.appendChild(document.createElement('div')); newLine.id = ( itemID == null ) ? 'l' + randStuff(12) : itemID;
        newLine.style.left = x1; newLine.style.top = y1; newLine.style.height = ( y2 - y1 ) + 'px'; newLine.style.width = ( x2 - x1 ) + 'px';

        if( className != null ) { newLine.className = className; } else { newLine.style.position = "relative"; }
        if( callback != null ) { newLine.addEventListener('click', callback, false); }
        if( content != null ) { newLine.textContent = content; }
        if( color != null ) { newLine.style.backgroundColor = color; }

        return newLine;
      }

      function sec2px( sec ) { return ( sec - stamps[0] ) / pxStep; } 

      function drawTimeLine() { let newLine; document.getElementById( 'lifeLine' ).style.width = lineLength + 'px';
        for( let i = 0; i < stamps.length - 1 ; ++i ) {
          newLine = document.getElementById( 'lifeLine' ).appendChild( document.createElement( 'div' ) ); newLine.id = 'll-' + i + '-' + ( i + 1 ); 
          newLine.className = 'll' + i%2; newLine.style.width = ( sec2px( stamps[i+1] ) - sec2px( stamps[i] ) ) + 'px';
        } 
        newLine = document.getElementById( 'lifeLine' ).appendChild( document.createElement( 'div' ) ); newLine.id = 'll-' + ( stamps.length - 1 ) + '-now'; 
        newLine.className = 'll' + ( stamps.length - 1 )%2; newLine.style.width = 'calc( var(--nowInPx) - ' + sec2px( stamps[ stamps.length - 1 ] ) + 'px )';

        newLine = document.getElementById( 'lifeLine' ).appendChild( document.createElement( 'div' ) ); newLine.id = 'll-remaining'; 
        newLine.className = 'll3'; newLine.style.width = 'calc( ' + lineLength + 'px - var(--nowInPx) )';
      }
      //newLine.style.left = 'var(--nowInPx)'; newLine.style.top = '0px'; newLine.style.height = '50px'; 
      //newLine.style.left = sec2px( stamps[i] ) + 'px'; newLine.style.top = '0px'; newLine.style.height = '50px'; 

      //function randStuff(n) { r = ""; for( var i = 0; i < n; ++i ) { r += Math.floor( Math.random() * 10 ); } return r; }
      //function addStuff(stuff) {
      //  newStuff = document.createElement(stuff); newStuff.id = 's' + randStuff(12); newStuff.classList = ""; 
      //  newStuff.innerHTML = ''; document.body.appendChild( newStuff );
      //}

      //ask the government instead
      //https://deces.matchid.io/deces/api/v1/search?firstName=chloe&sex=F&birthDate=13%2F07%2F1991&deathDate=06%2F07%2F2020-31%2F12%2F2025
      //{ 
      //  "request": { "sort": [ { "score": "desc" } ], "firstName": "chloe", "sex": "F", "birthDate": "13/07/1991", "deathDate": "06/07/2020-23/12/2025" },
      //  "response": { "total": 0, "maxScoreES": null, "size": 20, "page": 1, "delay": 41, "persons": [] }
      //}

      //function flipBack() { var ans = {}, out = [];
      //  if( this.readyState == 4 || this.readyState == 200 ) { 
      //    if ( false !== ( ans = yoda( JSON.parse, [this.responseText] ) ) ) {
      //      for (var i = 0; i < ans.response.persons.length; ++i) {
      //        if( ans.response.persons[i].birth.date == "19910713" ) {
      //          if( ans.response.persons[i].name.last.trim().toLowerCase() == "ravinet" ) {
      //            out.push( '<a href="https://deces.matchid.io/search?advanced=true&fuzzy=false&fn=chloe&sex=F&bd=13%2F07%2F1991">looks like her...</a>' );
      //          } else { out.push( '<a href="https://deces.matchid.io/search?advanced=true&fuzzy=false&fn=chloe&sex=F&bd=13%2F07%2F1991">birthdate matches</a>' ); }
      //        }
      //      } if( out.length < 1 ) { out.push( "found nothing... that's reasuring, right ?" ); }
      //      document.getElementById('lost').innerHTML = out.join("<br/>");
      //    } else { document.getElementById('lost').innerText = "Bad json, bad..."; console.log( this.responseText ); }
      //  }
      //}
      //
      ////encodeURIComponent("https://deces.matchid.io/deces/api/v1/search?firstName=chloe&sex=F&birthDate=" + encodeURIComponent("13/07/1991") + "&deathDate=" + encodeURIComponent( "06/07/2020-31/12/2025" ) );
      //function flip() { var x = new XMLHttpRequest(); x.onreadystatechange = flipBack; 
      //  var apiRequest = "https%3A%2F%2Fdeces.matchid.io%2Fdeces%2Fapi%2Fv1%2Fsearch%3FfirstName%3Dchloe%26sex%3DF%26birthDate%3D13%252F07%252F1991%26deathDate%3D06%252F07%252F2020-31%252F12%252F2025";
      //  x.open( "GET", "http://localhost/test/fuckCORS.php?fct=call&url=" + apiRequest, true );
      //  x.setRequestHeader( "Content-type","application/json" ); x.setRequestHeader('X-PINGOTHER', 'pingpong'); x.send( null );
      //}

      //function changeFavicon(text) {
      //  const canvas = document.createElement('canvas');
      //  canvas.height = 64;
      //  canvas.width = 64;
      //  const ctx = canvas.getContext('2d');
      //  ctx.font = '64px serif';
      //  ctx.fillText(text, 0, 64);
      //
      //  const link = document.createElement('link');
      //  const oldLinks = document.querySelectorAll('link[rel="shortcut icon"]');
      //  oldLinks.forEach(e => e.parentNode.removeChild(e));
      //  link.id = 'dynamic-favicon';
      //  link.rel = 'shortcut icon';
      //  link.href = canvas.toDataURL();
      //  document.head.appendChild(link);
      //}
      //
      //changeFavicon('üíö');

    </script>
  </head>
  <body onload="init();">
    <div id="stuff">
      <span id="t1"></span> missing...<br/><span id="t2"></span> more...<br/><span id="t3"></span> total<br/><span id="t4"></span> effective...<br/><span id="t5"></span> lost...<br/><span id="t9"></span> lasted...<br/><!-- <span id="breakdown"></span><br/><br/><div id="lost"></div>--><div id="lifeLine"></div>
    </div><div id="t6" class="pouet"></div><div id="t7" class="pouet"></div><div id="t8" class="pouet"></div>
    
  </body>
</html>
